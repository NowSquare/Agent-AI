# ==============================================================================
# Agent-AI — Local Development (macOS with Herd)
# ==============================================================================
# Windows/Linux devs: prefer the Docker setup (.env.docker).
# This project is Postmark-only: Mailpit is no longer used.
# ==============================================================================

APP_NAME="Agent AI"
APP_ENV=local
APP_DEBUG=true
APP_URL="http://agent-ai.test"
APP_TIMEZONE="Europe/Amsterdam"

# ------------------------------------------------------------------------------
# Database (PostgreSQL via Herd)
# ------------------------------------------------------------------------------
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=agent_ai
DB_USERNAME=root
DB_PASSWORD=

# ------------------------------------------------------------------------------
# Cache / Queues / Sessions (Redis via Herd)
# ------------------------------------------------------------------------------
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# ------------------------------------------------------------------------------
# Outbound Mail — Postmark only (no SMTP)
# ------------------------------------------------------------------------------
MAIL_MAILER="postmark"
POSTMARK_TOKEN="your-real-postmark-server-token"
POSTMARK_MESSAGE_STREAM_ID="outbound"   # default outbound stream name
MAIL_FROM_ADDRESS="noreply@agent-ai.test"
MAIL_FROM_NAME="Agent AI"

# ------------------------------------------------------------------------------
# Inbound Mail — Postmark webhook
# ------------------------------------------------------------------------------
# AGENT_MAIL is the *public-facing* address shown to users.
# In dev, you send mail TO this Postmark inbound address, which forwards JSON to
# your app via the configured webhook URL.
AGENT_MAIL="<hash>@inbound.postmarkapp.com"

INBOUND_EMAIL_DRIVER="postmark"

# Secure the inbound webhook with Basic Auth:
# - Use these credentials in .env
# - When configuring Postmark inbound stream → Webhook URL, include them in the URL:
#   https://WEBHOOK_USER:WEBHOOK_PASS@<ngrok-subdomain>.ngrok-free.app/webhooks/inbound-email
# Example: https://postmark:my-long-password@curly-bear.ngrok-free.app/webhooks/inbound-email
WEBHOOK_USER="postmark"
WEBHOOK_PASS="your-very-long-random-password-here"

# ------------------------------------------------------------------------------
# ngrok Setup (for local inbound testing)
# ------------------------------------------------------------------------------
# 1. Start ngrok to expose Herd (running on port 80):
#    ngrok http --url=curly-bear.ngrok-free.app 80 --host-header=agent-ai.test
# 2. Copy the ngrok HTTPS URL (e.g., https://curly-bear.ngrok-free.app).
# 3. In Postmark inbound settings, configure:
#    Webhook URL:
#    https://postmark:your-very-long-random-password-here@curly-bear.ngrok-free.app/webhooks/inbound-email
# 4. Send an email to AGENT_MAIL; Postmark will POST JSON to your app.

# ------------------------------------------------------------------------------
# LLM (local Ollama)
# ------------------------------------------------------------------------------
LLM_PROVIDER="ollama"
LLM_MODEL="gpt-oss:20b"
OLLAMA_BASE_URL="http://localhost:11434"

# ------------------------------------------------------------------------------
# Antivirus (ClamAV on host)
# ------------------------------------------------------------------------------
CLAMAV_HOST=127.0.0.1
CLAMAV_PORT=3310

# ------------------------------------------------------------------------------
# Filesystem
# ------------------------------------------------------------------------------
FILESYSTEM_DISK=local
